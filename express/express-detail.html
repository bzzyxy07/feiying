<table class="fill-container fill-page-container layui-table" id="express_detail_cont" lay-filter="express-detail-cont" fill-type="get">
	<colgroup>
		<col width="130">
		<col>
		<col width="130">
		<col>
		<col width="130">
		<col>
		<col width="110">
		<col>
	</colgroup>
	<tr>
		<th colspan="8" class="none-back-border">
			<p class="comm-title-dot"><span class="layui-badge-dot layui-bg-blue"></span>运单信息</p>
		</th>
	</tr>
	<tr>
		<th class="align-right">运单编号</th>
		<td>
			<span name="id" class="field-cont"></span>
		</td>
		<th class="align-right">创建时间</th>
		<td>
			<span name="createtime" class="field-cont"></span>
		</td>
		<th class="align-right">送达仓库</th>
		<td>
			<span name="depotname" class="field-cont"></span>
		</td>
		<th class="align-right">线路名称</th>
		<td>
			<span name="routename" class="field-cont"></span>
		</td>
	</tr>

	<tr>
		<th colspan="8" class="none-back-border">
			<p class="comm-title-dot"><span class="layui-badge-dot layui-bg-blue"></span>发件人信息</p>
		</th>
	</tr>
	<tr>
		<th class="align-right">姓名</th>
		<td>
			<span name="delivername" class="field-cont"></span>
		</td>
		<th class="align-right">电话</th>
		<td>
			<span name="delivermobile" class="field-cont"></span>
		</td>
		<th class="align-right">地址</th>
		<td colspan="3">
			<span name="deliveraddress" class="field-cont"></span>
		</td>
	</tr>

	<tr>
		<th colspan="8" class="none-back-border">
			<p class="comm-title-dot"><span class="layui-badge-dot layui-bg-blue"></span>收件人信息</p>
		</th>
	</tr>
	<tr>
		<th class="align-right">姓名</th>
		<td>
			<span name="receivername" class="field-cont"></span>
		</td>
		<th class="align-right">电话</th>
		<td>
			<span name="receivermobile" class="field-cont"></span>
		</td>
		<th class="align-right">地址</th>
		<td colspan="3">
			<span name="" class="field-cont" id="receiver_address"></span>
		</td>

	</tr>
	<tr>
		<th class="align-right">身份证正面照片</th>
		<td>
			<img name="receiveridcard_zheng" class="field-cont field-img" src="./static/img/no-img.png" style="width: 250px;height: 160px;display: block;margin: 0 auto;"></span>
		</td>
		<th class="align-right">身份证反面照片</th>
		<td>
			<img name="receiveridcard_fan" class="field-cont field-img" src="./static/img/no-img.png" style="width: 250px;height: 160px;display: block;margin: 0 auto;"></span>
		</td>
		<th class="align-right">邮编</th>
		<td>
			<span name="receiverpostcard" class="field-cont"></span>
		</td>
		<th class="align-right">身份证号</th>
		<td>
			<span name="receiveridcardnum" class="field-cont"></span>
		</td>
	</tr>

	<tr>
		<th colspan="8" class="none-back-border">
			<p class="comm-title-dot"><span class="layui-badge-dot layui-bg-blue"></span>包裹明细</p>
		</th>
	</tr>
	<tr>
		<th class="align-right">物品明细</th>
		<td colspan="7" class="padd-0">
			<table class="layui-table margin-0 table-inner-table" lay-size="sm">
				<thead>
					<tr>
						<th>类别</th>
						<th>物品名称</th>
						<th>规格</th>
						<th>品牌</th>
						<th>数量</th>
						<th>单价($)</th>
						<th>单位</th>
					</tr>
				</thead>
				<tbody id="detail_body">
					<tr class="detail-tr">
						<td><span name="taxcategoryname"></span></td>
						<td><span name="mingcheng"></span></td>
						<td><span name="guige"></span></td>
						<td><span name="pinpai"></span></td>
						<td><span name="count"></span></td>
						<td><span name="danjia"></span></td>
						<td><span name="danwei"></span></td>
					</tr>
				</tbody>
			</table>
		</td>
	</tr>
	<tr>
		<th class="align-right">重量</th>
		<td>
			<span name="weight" class="field-cont"></span>
		</td>
		<th class="align-right">保险</th>
		<td>
			<span name="safefreeover" class="field-cont"></span>
		</td>
		<th class="align-right">其他费用</th>
		<td>
			<span name="freeother" class="field-cont"></span>
		</td>
		<th class="align-right">税金</th>
		<td>
			<span name="freecoupon" class="field-cont"></span>
		</td>
	</tr>
	<tr>
		<th class="align-right">增值服务</th>
		<td colspan="7">
			<span name="freeservicenote" class="field-cont"></span>
		</td>
	</tr>
	<tr>
		<th class="align-right">费用</th>
		<td colspan="7">
			<span name="moneynote" class="field-cont"></span>
		</td>
	</tr>
	<tr>
		<th class="align-right">可用积分</th>
		<td colspan="7">
			<span name="" class="field-cont"></span>
		</td>
	</tr>
	<tr>
		<th class="align-right">备注</th>
		<td colspan="7"><span name="note" class="field-cont"></span></td>
	</tr>
</table>

<script>
	layui.use(['form', 'table'], function() {
		var cloneLine = $(".detail-tr").first().clone();
		var form = layui.form;
		var table = layui.table;

		comm.getDataByCondition({
			loading: true,
			ajax: {
				url: "/api/OrderTransportOrder/DealPendingOrderInitMy",
				data: {
					id: $("#main_container").data("data")
				},
				type: "get",
				success: function(data) {
					var orderInfo = data['orderdetails'];
					comm.fillPageByData(orderInfo, $("#express_detail_cont"), "name");

					$("#receiver_address").text(orderInfo['receiverregion_province'] + orderInfo['receiverregion_city'] + orderInfo['receiveraddress']);
					var details = orderInfo['details'];
					for(var i = 0, len = details.length - 1; i < len; i++) {
						$("#express_detail_cont #detail_body").append("<tr class='detail-tr'>" + $("#express_detail_cont #detail_body .detail-tr").first().html() + "</tr>");
					}
					details.map(function(v, index, arr) {
						for(var key in v) {
							var $cont = $("#express_detail_cont #detail_body .detail-tr:eq(" + index + ")").find("*[name='" + key + "']");
							$cont.text(v[key]).data("data", v[key]);
						}
					});
					var servStr = orderInfo["freeservicenote"];
					var servArr = servStr.split(";");
					var m = [];
					servArr.map(function(v, index) {
						m.push(v.split("*"));
					});

					var servicelist = data["servicelist"];
					var servStr1 = "";
					m.map(function(v, index) {
						var servid = m[index][0];
						var servnum = m[index][1];
						servicelist.map(function(v1, index1) {
							if(servid === v1.id) {
								servStr1 += v1.servicename + "*" + servnum + ";";
							}
						});
					});
					$('span[name="freeservicenote"]').text(servStr1);
				}
			}
		});

		//		$("#express_detail_cont").attr("fill-url", "/api/OrderTransportOrder/DealPendingOrderInitMy?id=" + $("#main_container").data("data"));
		//		comm.fillContainerByUrl({
		//			cont: $("#express_detail_cont"),
		//			cb: function(data) {
		//				var detaillist = data.detaillist;
		//				for(var i = 0, len = detaillist.length - 1; i < len; i++) {
		//					$("#detail_body").append("<tr class='detail-tr'>" + $(".detail-tr").first().html() + "</tr>");
		//				}
		//				detaillist.map(function(v, index, arr) {
		//					for(var key in v) {
		//						var $cont = $("#detail_body .detail-tr:eq(" + index + ")").find("*[name='" + key + "']");
		//						$cont.text(v[key]).data("data", v[key]);
		//					}
		//				});
		//			}
		//		});
	});
</script>